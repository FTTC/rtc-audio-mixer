!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("trtc-js-sdk")):"function"==typeof define&&define.amd?define(["trtc-js-sdk"],e):(t=t||self).AudioMixerPlugin=e(t.TRTC)}(this,(function(t){function e(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(s){return void r(s)}u.done?e(c):Promise.resolve(c).then(n,o)}function r(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)}))}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var a=function(t){try{return!!t()}catch(e){return!0}},u={}.toString,c=function(t){return u.call(t).slice(8,-1)},s="".split,f=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==c(t)?s.call(t,""):Object(t)}:Object,l=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},d=function(t){return f(l(t))},h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function p(t,e){return t(e={exports:{}},e.exports),e.exports}var v,y,g=function(t){return t&&t.Math==Math&&t},m=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof h&&h)||function(){return this}()||Function("return this")(),w=function(t,e){try{Object.defineProperty(m,t,{value:e,configurable:!0,writable:!0})}catch(r){m[t]=e}return e},b=m["__core-js_shared__"]||w("__core-js_shared__",{}),x=p((function(t){(t.exports=function(t,e){return b[t]||(b[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.18.2",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),S=function(t){return Object(l(t))},E={}.hasOwnProperty,O=Object.hasOwn||function(t,e){return E.call(S(t),e)},k=0,A=Math.random(),T=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++k+A).toString(36)},L=function(t){return"function"==typeof t},j=function(t){return L(t)?t:void 0},_=function(t,e){return arguments.length<2?j(m[t]):m[t]&&m[t][e]},I=_("navigator","userAgent")||"",P=m.process,M=m.Deno,R=P&&P.versions||M&&M.version,C=R&&R.v8;C?y=(v=C.split("."))[0]<4?1:v[0]+v[1]:I&&(!(v=I.match(/Edge\/(\d+)/))||v[1]>=74)&&(v=I.match(/Chrome\/(\d+)/))&&(y=v[1]);var F,N=y&&+y,D=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&N&&N<41})),G=D&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,z=x("wks"),B=m.Symbol,W=G?B:B&&B.withoutSetter||T,U=function(t){return O(z,t)&&(D||"string"==typeof z[t])||(D&&O(B,t)?z[t]=B[t]:z[t]=W("Symbol."+t)),z[t]},V=function(t){return"object"==typeof t?null!==t:L(t)},Y=function(t){if(V(t))return t;throw TypeError(String(t)+" is not an object")},H=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),K=m.document,$=V(K)&&V(K.createElement),Q=function(t){return $?K.createElement(t):{}},q=!H&&!a((function(){return 7!=Object.defineProperty(Q("div"),"a",{get:function(){return 7}}).a})),X=G?function(t){return"symbol"==typeof t}:function(t){var e=_("Symbol");return L(e)&&Object(t)instanceof e},J=function(t){if(L(t))return t;throw TypeError(function(t){try{return String(t)}catch(e){return"Object"}}(t)+" is not a function")},Z=function(t,e){var r=t[e];return null==r?void 0:J(r)},tt=U("toPrimitive"),et=function(t,e){if(!V(t)||X(t))return t;var r,n=Z(t,tt);if(n){if(void 0===e&&(e="default"),r=n.call(t,e),!V(r)||X(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&L(r=t.toString)&&!V(n=r.call(t)))return n;if(L(r=t.valueOf)&&!V(n=r.call(t)))return n;if("string"!==e&&L(r=t.toString)&&!V(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}(t,e)},rt=function(t){var e=et(t,"string");return X(e)?e:String(e)},nt=Object.defineProperty,ot={f:H?nt:function(t,e,r){if(Y(t),e=rt(e),Y(r),q)try{return nt(t,e,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},it=Math.ceil,at=Math.floor,ut=function(t){var e=+t;return e!=e||0===e?0:(e>0?at:it)(e)},ct=Math.max,st=Math.min,ft=Math.min,lt=function(t){return t>0?ft(ut(t),9007199254740991):0},dt=function(t){return lt(t.length)},ht=function(t){return function(e,r,n){var o,i=d(e),a=dt(i),u=function(t,e){var r=ut(t);return r<0?ct(r+e,0):st(r,e)}(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},pt={includes:ht(!0),indexOf:ht(!1)},vt={},yt=pt.indexOf,gt=function(t,e){var r,n=d(t),o=0,i=[];for(r in n)!O(vt,r)&&O(n,r)&&i.push(r);for(;e.length>o;)O(n,r=e[o++])&&(~yt(i,r)||i.push(r));return i},mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wt=Object.keys||function(t){return gt(t,mt)},bt=H?Object.defineProperties:function(t,e){Y(t);for(var r,n=wt(e),o=n.length,i=0;o>i;)ot.f(t,r=n[i++],e[r]);return t},xt=_("document","documentElement"),St=x("keys"),Et=function(t){return St[t]||(St[t]=T(t))},Ot=Et("IE_PROTO"),kt=function(){},At=function(t){return"<script>"+t+"<\/script>"},Tt=function(t){t.write(At("")),t.close();var e=t.parentWindow.Object;return t=null,e},Lt=function(){try{F=new ActiveXObject("htmlfile")}catch(n){}var t,e;Lt="undefined"!=typeof document?document.domain&&F?Tt(F):((e=Q("iframe")).style.display="none",xt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(At("document.F=Object")),t.close(),t.F):Tt(F);for(var r=mt.length;r--;)delete Lt.prototype[mt[r]];return Lt()};vt[Ot]=!0;var jt=Object.create||function(t,e){var r;return null!==t?(kt.prototype=Y(t),r=new kt,kt.prototype=null,r[Ot]=t):r=Lt(),void 0===e?r:bt(r,e)},_t=U("unscopables"),It=Array.prototype;null==It[_t]&&ot.f(It,_t,{configurable:!0,value:jt(null)});var Pt=function(t){It[_t][t]=!0},Mt={},Rt=Function.toString;L(b.inspectSource)||(b.inspectSource=function(t){return Rt.call(t)});var Ct,Ft,Nt,Dt=b.inspectSource,Gt=m.WeakMap,zt=L(Gt)&&/native code/.test(Dt(Gt)),Bt=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Wt=H?function(t,e,r){return ot.f(t,e,Bt(1,r))}:function(t,e,r){return t[e]=r,t},Ut=m.WeakMap;if(zt||b.state){var Vt=b.state||(b.state=new Ut),Yt=Vt.get,Ht=Vt.has,Kt=Vt.set;Ct=function(t,e){if(Ht.call(Vt,t))throw new TypeError("Object already initialized");return e.facade=t,Kt.call(Vt,t,e),e},Ft=function(t){return Yt.call(Vt,t)||{}},Nt=function(t){return Ht.call(Vt,t)}}else{var $t=Et("state");vt[$t]=!0,Ct=function(t,e){if(O(t,$t))throw new TypeError("Object already initialized");return e.facade=t,Wt(t,$t,e),e},Ft=function(t){return O(t,$t)?t[$t]:{}},Nt=function(t){return O(t,$t)}}var Qt,qt,Xt,Jt={set:Ct,get:Ft,has:Nt,enforce:function(t){return Nt(t)?Ft(t):Ct(t,{})},getterFor:function(t){return function(e){var r;if(!V(e)||(r=Ft(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},Zt={}.propertyIsEnumerable,te=Object.getOwnPropertyDescriptor,ee={f:te&&!Zt.call({1:2},1)?function(t){var e=te(this,t);return!!e&&e.enumerable}:Zt},re=Object.getOwnPropertyDescriptor,ne={f:H?re:function(t,e){if(t=d(t),e=rt(e),q)try{return re(t,e)}catch(r){}if(O(t,e))return Bt(!ee.f.call(t,e),t[e])}},oe=Function.prototype,ie=H&&Object.getOwnPropertyDescriptor,ae=O(oe,"name"),ue={EXISTS:ae,PROPER:ae&&"something"===function(){}.name,CONFIGURABLE:ae&&(!H||H&&ie(oe,"name").configurable)},ce=p((function(t){var e=ue.CONFIGURABLE,r=Jt.get,n=Jt.enforce,o=String(String).split("String");(t.exports=function(t,r,i,a){var u,c=!!a&&!!a.unsafe,s=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet,l=a&&void 0!==a.name?a.name:r;L(i)&&("Symbol("===String(l).slice(0,7)&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!O(i,"name")||e&&i.name!==l)&&Wt(i,"name",l),(u=n(i)).source||(u.source=o.join("string"==typeof l?l:""))),t!==m?(c?!f&&t[r]&&(s=!0):delete t[r],s?t[r]=i:Wt(t,r,i)):s?t[r]=i:w(r,i)})(Function.prototype,"toString",(function(){return L(this)&&r(this).source||Dt(this)}))})),se=mt.concat("length","prototype"),fe={f:Object.getOwnPropertyNames||function(t){return gt(t,se)}},le={f:Object.getOwnPropertySymbols},de=_("Reflect","ownKeys")||function(t){var e=fe.f(Y(t)),r=le.f;return r?e.concat(r(t)):e},he=function(t,e){for(var r=de(e),n=ot.f,o=ne.f,i=0;i<r.length;i++){var a=r[i];O(t,a)||n(t,a,o(e,a))}},pe=/#|\.prototype\./,ve=function(t,e){var r=ge[ye(t)];return r==we||r!=me&&(L(e)?a(e):!!e)},ye=ve.normalize=function(t){return String(t).replace(pe,".").toLowerCase()},ge=ve.data={},me=ve.NATIVE="N",we=ve.POLYFILL="P",be=ve,xe=ne.f,Se=function(t,e){var r,n,o,i,a,u=t.target,c=t.global,s=t.stat;if(r=c?m:s?m[u]||w(u,{}):(m[u]||{}).prototype)for(n in e){if(i=e[n],o=t.noTargetGet?(a=xe(r,n))&&a.value:r[n],!be(c?n:u+(s?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;he(i,o)}(t.sham||o&&o.sham)&&Wt(i,"sham",!0),ce(r,n,i,t)}},Ee=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Oe=Et("IE_PROTO"),ke=Object.prototype,Ae=Ee?Object.getPrototypeOf:function(t){var e=S(t);if(O(e,Oe))return e[Oe];var r=e.constructor;return L(r)&&e instanceof r?r.prototype:e instanceof Object?ke:null},Te=U("iterator"),Le=!1;[].keys&&("next"in(Xt=[].keys())?(qt=Ae(Ae(Xt)))!==Object.prototype&&(Qt=qt):Le=!0),(null==Qt||a((function(){var t={};return Qt[Te].call(t)!==t})))&&(Qt={}),L(Qt[Te])||ce(Qt,Te,(function(){return this}));var je={IteratorPrototype:Qt,BUGGY_SAFARI_ITERATORS:Le},_e=ot.f,Ie=U("toStringTag"),Pe=function(t,e,r){t&&!O(t=r?t:t.prototype,Ie)&&_e(t,Ie,{configurable:!0,value:e})},Me=je.IteratorPrototype,Re=function(){return this},Ce=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(n){}return function(r,n){return Y(r),function(t){if("object"==typeof t||L(t))return t;throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),Fe=ue.PROPER,Ne=ue.CONFIGURABLE,De=je.IteratorPrototype,Ge=je.BUGGY_SAFARI_ITERATORS,ze=U("iterator"),Be=function(){return this},We=function(t,e,r,n,o,i,a){!function(t,e,r){var n=e+" Iterator";t.prototype=jt(Me,{next:Bt(1,r)}),Pe(t,n,!1),Mt[n]=Re}(r,e,n);var u,c,s,f=function(t){if(t===o&&v)return v;if(!Ge&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",d=!1,h=t.prototype,p=h[ze]||h["@@iterator"]||o&&h[o],v=!Ge&&p||f(o),y="Array"==e&&h.entries||p;if(y&&(u=Ae(y.call(new t)))!==Object.prototype&&u.next&&(Ae(u)!==De&&(Ce?Ce(u,De):L(u[ze])||ce(u,ze,Be)),Pe(u,l,!0)),Fe&&"values"==o&&p&&"values"!==p.name&&(Ne?Wt(h,"name","values"):(d=!0,v=function(){return p.call(this)})),o)if(c={values:f("values"),keys:i?v:f("keys"),entries:f("entries")},a)for(s in c)(Ge||d||!(s in h))&&ce(h,s,c[s]);else Se({target:e,proto:!0,forced:Ge||d},c);return h[ze]!==v&&ce(h,ze,v,{name:o}),Mt[e]=v,c},Ue=Jt.set,Ve=Jt.getterFor("Array Iterator"),Ye=We(Array,"Array",(function(t,e){Ue(this,{type:"Array Iterator",target:d(t),index:0,kind:e})}),(function(){var t=Ve(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");Mt.Arguments=Mt.Array,Pt("keys"),Pt("values"),Pt("entries");var He=fe.f,Ke={}.toString,$e="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Qe={f:function(t){return $e&&"[object Window]"==Ke.call(t)?function(t){try{return He(t)}catch(e){return $e.slice()}}(t):He(d(t))}},qe=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),Xe=p((function(t){var e=ot.f,r=!1,n=T("meta"),o=0,i=Object.isExtensible||function(){return!0},a=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},u=t.exports={enable:function(){u.enable=function(){},r=!0;var t=fe.f,e=[].splice,o={};o[n]=1,t(o).length&&(fe.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e.call(o,i,1);break}return o},Se({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Qe.f}))},fastKey:function(t,e){if(!V(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!O(t,n)){if(!i(t))return"F";if(!e)return"E";a(t)}return t[n].objectID},getWeakData:function(t,e){if(!O(t,n)){if(!i(t))return!0;if(!e)return!1;a(t)}return t[n].weakData},onFreeze:function(t){return qe&&r&&i(t)&&!O(t,n)&&a(t),t}};vt[n]=!0})),Je=(Xe.enable,Xe.fastKey,Xe.getWeakData,Xe.onFreeze,U("iterator")),Ze=Array.prototype,tr=function(t,e,r){if(J(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},er={};er[U("toStringTag")]="z";var rr="[object z]"===String(er),nr=U("toStringTag"),or="Arguments"==c(function(){return arguments}()),ir=rr?c:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(r){}}(e=Object(t),nr))?r:or?c(e):"Object"==(n=c(e))&&L(e.callee)?"Arguments":n},ar=U("iterator"),ur=function(t){if(null!=t)return Z(t,ar)||Z(t,"@@iterator")||Mt[ir(t)]},cr=function(t,e,r){var n,o;Y(t);try{if(!(n=Z(t,"return"))){if("throw"===e)throw r;return r}n=n.call(t)}catch(i){o=!0,n=i}if("throw"===e)throw r;if(o)throw n;return Y(n),r},sr=function(t,e){this.stopped=t,this.result=e},fr=function(t,e,r){var n,o,i,a,u,c,s,f,l=r&&r.that,d=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_ITERATOR),p=!(!r||!r.INTERRUPTED),v=tr(e,l,1+d+p),y=function(t){return n&&cr(n,"normal",t),new sr(!0,t)},g=function(t){return d?(Y(t),p?v(t[0],t[1],y):v(t[0],t[1])):p?v(t,y):v(t)};if(h)n=t;else{if(!(o=ur(t)))throw TypeError(String(t)+" is not iterable");if(void 0!==(f=o)&&(Mt.Array===f||Ze[Je]===f)){for(i=0,a=dt(t);a>i;i++)if((u=g(t[i]))&&u instanceof sr)return u;return new sr(!1)}n=function(t,e){var r=arguments.length<2?ur(t):e;if(J(r))return Y(r.call(t));throw TypeError(String(t)+" is not iterable")}(t,o)}for(c=n.next;!(s=c.call(n)).done;){try{u=g(s.value)}catch(m){cr(n,"throw",m)}if("object"==typeof u&&u&&u instanceof sr)return u}return new sr(!1)},lr=function(t,e,r){if(t instanceof e)return t;throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")},dr=U("iterator"),hr=!1;try{var pr=0,vr={next:function(){return{done:!!pr++}},return:function(){hr=!0}};vr[dr]=function(){return this},Array.from(vr,(function(){throw 2}))}catch(Ho){}var yr=function(t,e,r){for(var n in e)ce(t,n,e[n],r);return t},gr=U("species"),mr=ot.f,wr=Xe.fastKey,br=Jt.set,xr=Jt.getterFor,Sr=(function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",u=m[t],c=u&&u.prototype,s=u,f={},l=function(t){var e=c[t];ce(c,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!V(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!V(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!V(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(be(t,!L(u)||!(o||c.forEach&&!a((function(){(new u).entries().next()})))))s=r.getConstructor(e,t,n,i),Xe.enable();else if(be(t,!0)){var d=new s,h=d[i](o?{}:-0,1)!=d,p=a((function(){d.has(1)})),v=function(t,e){if(!e&&!hr)return!1;var r=!1;try{var n={};n[dr]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(Ho){}return r}((function(t){new u(t)})),y=!o&&a((function(){for(var t=new u,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(e,r){lr(e,s,t);var o=function(t,e,r){var n,o;return Ce&&L(n=e.constructor)&&n!==r&&V(o=n.prototype)&&o!==r.prototype&&Ce(t,o),t}(new u,e,s);return null!=r&&fr(r,o[i],{that:o,AS_ENTRIES:n}),o}))).prototype=c,c.constructor=s),(p||y)&&(l("delete"),l("has"),n&&l("get")),(y||h)&&l(i),o&&c.clear&&delete c.clear}f[t]=s,Se({global:!0,forced:s!=u},f),Pe(s,t),o||r.setStrong(s,t,n)}("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,i){lr(t,o,e),br(t,{type:e,index:jt(null),first:void 0,last:void 0,size:0}),H||(t.size=0),null!=i&&fr(i,t[n],{that:t,AS_ENTRIES:r})})),i=xr(e),a=function(t,e,r){var n,o,a=i(t),c=u(t,e);return c?c.value=r:(a.last=c={index:o=wr(e,!0),key:e,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=c),n&&(n.next=c),H?a.size++:t.size++,"F"!==o&&(a.index[o]=c)),t},u=function(t,e){var r,n=i(t),o=wr(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return yr(o.prototype,{clear:function(){for(var t=i(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,H?t.size=0:this.size=0},delete:function(t){var e=i(this),r=u(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),H?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=i(this),n=tr(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),yr(o.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),H&&mr(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=xr(e),i=xr(n);We(t,e,(function(t,e){br(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),function(t){var e=_(t),r=ot.f;H&&e&&!e[gr]&&r(e,gr,{configurable:!0,get:function(){return this}})}(e)}}),rr?{}.toString:function(){return"[object "+ir(this)+"]"});rr||ce(Object.prototype,"toString",Sr,{unsafe:!0});var Er=function(t){if("Symbol"===ir(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},Or=function(t){return function(e,r){var n,o,i=Er(l(e)),a=ut(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):n:t?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},kr={codeAt:Or(!1),charAt:Or(!0)},Ar=kr.charAt,Tr=Jt.set,Lr=Jt.getterFor("String Iterator");We(String,"String",(function(t){Tr(this,{type:"String Iterator",string:Er(t),index:0})}),(function(){var t,e=Lr(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=Ar(r,n),e.index+=t.length,{value:t,done:!1})}));var jr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_r=Q("span").classList,Ir=_r&&_r.constructor&&_r.constructor.prototype,Pr=Ir===Object.prototype?void 0:Ir,Mr=U("iterator"),Rr=U("toStringTag"),Cr=Ye.values,Fr=function(t,e){if(t){if(t[Mr]!==Cr)try{Wt(t,Mr,Cr)}catch(Ho){t[Mr]=Cr}if(t[Rr]||Wt(t,Rr,e),jr[e])for(var r in Ye)if(t[r]!==Ye[r])try{Wt(t,r,Ye[r])}catch(Ho){t[r]=Ye[r]}}};for(var Nr in jr)Fr(m[Nr]&&m[Nr].prototype,Nr);Fr(Pr,"DOMTokenList");var Dr=Array.isArray||function(t){return"Array"==c(t)},Gr=[],zr=_("Reflect","construct"),Br=/^\s*(?:class|function)\b/,Wr=Br.exec,Ur=!Br.exec((function(){})),Vr=function(t){if(!L(t))return!1;try{return zr(Object,Gr,t),!0}catch(Ho){return!1}},Yr=!zr||a((function(){var t;return Vr(Vr.call)||!Vr(Object)||!Vr((function(){t=!0}))||t}))?function(t){if(!L(t))return!1;switch(ir(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Ur||!!Wr.call(Br,Dt(t))}:Vr,Hr=U("species"),Kr=function(t,e){return new(function(t){var e;return Dr(t)&&(e=t.constructor,(Yr(e)&&(e===Array||Dr(e.prototype))||V(e)&&null===(e=e[Hr]))&&(e=void 0)),void 0===e?Array:e}(t))(0===e?0:e)},$r=[].push,Qr=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(c,s,l,d){for(var h,p,v=S(c),y=f(v),g=tr(s,l,3),m=dt(y),w=0,b=d||Kr,x=e?b(c,m):r||a?b(c,0):void 0;m>w;w++)if((u||w in y)&&(p=g(h=y[w],w,v),t))if(e)x[w]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return w;case 2:$r.call(x,h)}else switch(t){case 4:return!1;case 7:$r.call(x,h)}return i?-1:n||o?o:x}},qr={forEach:Qr(0),map:Qr(1),filter:Qr(2),some:Qr(3),every:Qr(4),find:Qr(5),findIndex:Qr(6),filterReject:Qr(7)},Xr=function(t,e){var r=[][t];return!!r&&a((function(){r.call(null,e||function(){throw 1},1)}))},Jr=qr.forEach,Zr=Xr("forEach")?[].forEach:function(t){return Jr(this,t,arguments.length>1?arguments[1]:void 0)};Se({target:"Array",proto:!0,forced:[].forEach!=Zr},{forEach:Zr});var tn=function(t){if(t&&t.forEach!==Zr)try{Wt(t,"forEach",Zr)}catch(Ho){t.forEach=Zr}};for(var en in jr)jr[en]&&tn(m[en]&&m[en].prototype);tn(Pr);var rn=Math.min,nn=[].lastIndexOf,on=!!nn&&1/[1].lastIndexOf(1,-0)<0,an=Xr("lastIndexOf"),un=on||!an?function(t){if(on)return nn.apply(this,arguments)||0;var e=d(this),r=dt(e),n=r-1;for(arguments.length>1&&(n=rn(n,ut(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:nn;Se({target:"Array",proto:!0,forced:un!==[].lastIndexOf},{lastIndexOf:un});var cn=pt.indexOf,sn=[].indexOf,fn=!!sn&&1/[1].indexOf(1,-0)<0,ln=Xr("indexOf");Se({target:"Array",proto:!0,forced:fn||!ln},{indexOf:function(t){return fn?sn.apply(this,arguments)||0:cn(this,t,arguments.length>1?arguments[1]:void 0)}});var dn,hn=U("match"),pn=function(t){if(function(t){var e;return V(t)&&(void 0!==(e=t[hn])?!!e:"RegExp"==c(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},vn=U("match"),yn=ne.f,gn="".startsWith,mn=Math.min,wn=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[vn]=!1,"/./"[t](e)}catch(n){}}return!1}("startsWith"),bn=!(wn||(dn=yn(String.prototype,"startsWith"),!dn||dn.writable));Se({target:"String",proto:!0,forced:!bn&&!wn},{startsWith:function(t){var e=Er(l(this));pn(t);var r=lt(mn(arguments.length>1?arguments[1]:void 0,e.length)),n=Er(t);return gn?gn.call(e,n,r):e.slice(r,r+n.length)===n}}),Se({target:"Array",stat:!0},{isArray:Dr});p((function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(A){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=b(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(A){return{type:"throw",arg:A}}}t.wrap=c;var f={};function l(){}function d(){}function h(){}var p={};u(p,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&r.call(y,o)&&(p=y);var g=h.prototype=l.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,u){var c=s(t[o],t,i);if("throw"!==c.type){var f=c.arg,l=f.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=h,u(g,"constructor",h),u(h,"constructor",d),d.displayName=u(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(w.prototype),u(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),u(g,a,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=e}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}));var xn=U("species"),Sn=function(t){return N>=51||!a((function(){var e=[];return(e.constructor={})[xn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},En=qr.map,On=Sn("map");Se({target:"Array",proto:!0,forced:!On},{map:function(t){return En(this,t,arguments.length>1?arguments[1]:void 0)}});var kn=qr.filter,An=Sn("filter");Se({target:"Array",proto:!0,forced:!An},{filter:function(t){return kn(this,t,arguments.length>1?arguments[1]:void 0)}});var Tn=qr.findIndex,Ln=!0;"findIndex"in[]&&Array(1).findIndex((function(){Ln=!1})),Se({target:"Array",proto:!0,forced:Ln},{findIndex:function(t){return Tn(this,t,arguments.length>1?arguments[1]:void 0)}}),Pt("findIndex");var jn,_n,In=function(){var t=Y(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Pn=m.RegExp,Mn={UNSUPPORTED_Y:a((function(){var t=Pn("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:a((function(){var t=Pn("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Rn=m.RegExp,Cn=a((function(){var t=Rn(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Fn=m.RegExp,Nn=a((function(){var t=Fn("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Dn=Jt.get,Gn=RegExp.prototype.exec,zn=x("native-string-replace",String.prototype.replace),Bn=Gn,Wn=(jn=/a/,_n=/b*/g,Gn.call(jn,"a"),Gn.call(_n,"a"),0!==jn.lastIndex||0!==_n.lastIndex),Un=Mn.UNSUPPORTED_Y||Mn.BROKEN_CARET,Vn=void 0!==/()??/.exec("")[1];(Wn||Vn||Un||Cn||Nn)&&(Bn=function(t){var e,r,n,o,i,a,u,c=this,s=Dn(c),f=Er(t),l=s.raw;if(l)return l.lastIndex=c.lastIndex,e=Bn.call(l,f),c.lastIndex=l.lastIndex,e;var d=s.groups,h=Un&&c.sticky,p=In.call(c),v=c.source,y=0,g=f;if(h&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),g=f.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==f.charAt(c.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,y++),r=new RegExp("^(?:"+v+")",p)),Vn&&(r=new RegExp("^"+v+"$(?!\\s)",p)),Wn&&(n=c.lastIndex),o=Gn.call(h?r:c,g),h?o?(o.input=o.input.slice(y),o[0]=o[0].slice(y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:Wn&&o&&(c.lastIndex=c.global?o.index+o[0].length:n),Vn&&o&&o.length>1&&zn.call(o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&d)for(o.groups=a=jt(null),i=0;i<d.length;i++)a[(u=d[i])[0]]=o[u[1]];return o});var Yn=Bn;Se({target:"RegExp",proto:!0,forced:/./.exec!==Yn},{exec:Yn});var Hn="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",Kn=RegExp("^"+Hn+Hn+"*"),$n=RegExp(Hn+Hn+"*$"),Qn=function(t){return function(e){var r=Er(l(e));return 1&t&&(r=r.replace(Kn,"")),2&t&&(r=r.replace($n,"")),r}},qn={start:Qn(1),end:Qn(2),trim:Qn(3)}.trim,Xn=m.parseFloat,Jn=m.Symbol,Zn=Jn&&Jn.iterator,to=1/Xn("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff-0")!=-Infinity||Zn&&!a((function(){Xn(Object(Zn))}))?function(t){var e=qn(Er(t)),r=Xn(e);return 0===r&&"-"==e.charAt(0)?-0:r}:Xn;Se({global:!0,forced:parseFloat!=to},{parseFloat:to});var eo=U("species"),ro=RegExp.prototype,no=kr.charAt,oo=function(t,e,r){return e+(r?no(t,e).length:1)},io=function(t,e){var r=t.exec;if(L(r)){var n=r.call(t,e);return null!==n&&Y(n),n}if("RegExp"===c(t))return Yn.call(t,e);throw TypeError("RegExp#exec called on incompatible receiver")};!function(t,e,r,n){var o=U(t),i=!a((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),u=i&&!a((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[eo]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!u||r){var c=/./[o],s=e(o,""[t],(function(t,e,r,n,o){var a=e.exec;return a===Yn||a===ro.exec?i&&!o?{done:!0,value:c.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}));ce(String.prototype,t,s[0]),ce(ro,o,s[1])}n&&Wt(ro[o],"sham",!0)}("match",(function(t,e,r){return[function(e){var r=l(this),n=null==e?void 0:Z(e,t);return n?n.call(e,r):new RegExp(e)[t](Er(r))},function(t){var n=Y(this),o=Er(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return io(n,o);var a=n.unicode;n.lastIndex=0;for(var u,c=[],s=0;null!==(u=io(n,o));){var f=Er(u[0]);c[s]=f,""===f&&(n.lastIndex=oo(o,lt(n.lastIndex),a)),s++}return 0===s?null:c}]}));var ao=function(t,e,r){var n=rt(e);n in t?ot.f(t,n,Bt(0,r)):t[n]=r},uo=U("isConcatSpreadable"),co=N>=51||!a((function(){var t=[];return t[uo]=!1,t.concat()[0]!==t})),so=Sn("concat"),fo=function(t){if(!V(t))return!1;var e=t[uo];return void 0!==e?!!e:Dr(t)};Se({target:"Array",proto:!0,forced:!co||!so},{concat:function(t){var e,r,n,o,i,a=S(this),u=Kr(a,0),c=0;for(e=-1,n=arguments.length;e<n;e++)if(fo(i=-1===e?a:arguments[e])){if(c+(o=dt(i))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<o;r++,c++)r in i&&ao(u,c,i[r])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");ao(u,c++,i)}return u.length=c,u}});var lo=window.navigator&&window.navigator.userAgent||"",ho=/AppleWebKit\/([\d.]+)/i.exec(lo),po=(ho&&parseFloat(ho.pop()),/iPad/i.test(lo)),vo=/iPhone/i.test(lo)&&!po,yo=/iPod/i.test(lo),go=vo||po||yo,mo=(function(){var t=lo.match(/OS (\d+)_/i);t&&t[1]&&t[1]}(),/Android/i.test(lo)),wo=function(){var t=lo.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return e&&r?parseFloat("".concat(t[1],".").concat(t[2])):e||null}(),bo=(mo&&/webkit/i.test(lo),/Firefox/i.test(lo)),xo=function(){var t=lo.match(/Firefox\/(\d+)/);return t&&t[1]?parseFloat(t[1]):null}(),So=/Edge\//i.test(lo),Eo=/Edg\//i.test(lo),Oo=function(){var t=lo.match(/Edg\/(\d+)/);return t&&t[1]?parseFloat(t[1]):null}(),ko=!So&&/Chrome/i.test(lo),Ao=(function(){var t=lo.match(/Chrome\/(\d+)/);t&&t[1]&&parseFloat(t[1])}(),function(){var t=lo.match(/Chrome\/([\d.]+)/);return t&&t[1]?t[1]:null}()),To=(/MSIE\s8\.0/.test(lo),function(){var t=/MSIE\s(\d+)\.\d/.exec(lo),e=t&&parseFloat(t[1]);!e&&/Trident\/7.0/i.test(lo)&&/rv:11.0/.test(lo)&&(e=11)}(),/Safari/i.test(lo)&&!ko&&!mo&&!So),Lo=function(){var t=lo.match(/Version\/([\d.]+)/);return t&&t[1]?t[1]:null}(),jo=/TBS\/\d+/i.test(lo),_o=(function(){var t=lo.match(/TBS\/(\d+)/i);if(t&&t[1])t[1]}(),!jo&&/MQQBrowser\/\d+/i.test(lo),!jo&&/ QQBrowser\/\d+/i.test(lo),/(micromessenger|webbrowser)/i.test(lo),/Windows/i.test(lo),/MAC OS X/i.test(lo),/Linux/i.test(lo),/MicroMessenger/i.test(lo),/UCBrowser/i.test(lo),/MiuiBrowser/i.test(lo),/HuaweiBrowser/i.test(lo),"file:"===location.protocol||"localhost"===location.hostname||/^\d+\.\d+\.\d+\.\d+$/.test(location.hostname)),Io=function(){return!(ko&&Ao<56||To&&Lo<11||Eo&&Oo<80||bo&&xo<56||go&&Lo<14||("undefined"!=typeof AudioContext&&(t=new AudioContext),void 0!==window.webkitAudioContext&&(t=new window.webkitAudioContext),void 0!==window.mozAudioContext&&(t=new window.mozAudioContext),!(t.createMediaElementSource&&t.createMediaStreamDestination&&t.createMediaStreamSource)));var t},Po=function(t){return"string"==typeof t},Mo=function(){return"undefined"!=typeof AudioContext?new AudioContext:void 0!==window.webkitAudioContext?new window.webkitAudioContext:void 0!==window.mozAudioContext?new window.mozAudioContext:void 0},Ro=function(){var t=r(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Fo()&&!Co()){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,navigator.mediaDevices.enumerateDevices();case 4:return e=t.sent,t.abrupt("return",e.filter((function(t){return"audioinput"===t.kind})).map((function(t,e){var r=t.label;t.label||(r="microphone_".concat(e));var n={label:r,deviceId:t.deviceId,kind:t.kind};return t.groupId&&(n.groupId=t.groupId),n})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Co=function(){return void 0===navigator.mediaDevices&&(console.error("navigator.mediaDevices is not supported on your browser"),!0)},Fo=function(){return"http:"===location.protocol&&!_o&&(console.error("you should use "),!0)},No=function(){var t=r(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("getSettings"in MediaStreamTrack.prototype)){t.next=8;break}if(r=e.getSettings(),n=r.deviceId,!Po(n)||!n.startsWith("WebAudio")){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,Ro();case 6:return o=t.sent,t.abrupt("return",o.findIndex((function(t){return t.deviceId===n}))>=0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Do=[].slice,Go={},zo=function(t,e,r){if(!(e in Go)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";Go[e]=Function("C,a","return new C("+n.join(",")+")")}return Go[e](t,r)},Bo=Function.bind||function(t){var e=J(this),r=Do.call(arguments,1),n=function(){var o=r.concat(Do.call(arguments));return this instanceof n?zo(e,o.length,o):e.apply(t,o)};return V(e.prototype)&&(n.prototype=e.prototype),n};Se({target:"Function",proto:!0},{bind:Bo});var Wo=p((function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(t,e,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new o(n,i||t,a),c=r?r+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],u]:t._events[c].push(u):(t._events[c]=u,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function u(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),u.prototype.eventNames=function(){var t,n,o=[];if(0===this._eventsCount)return o;for(n in t=this._events)e.call(t,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},u.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,o,i,a){var u=r?r+t:t;if(!this._events[u])return!1;var c,s,f=this._events[u],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,o),!0;case 5:return f.fn.call(f.context,e,n,o,i),!0;case 6:return f.fn.call(f.context,e,n,o,i,a),!0}for(s=1,c=new Array(l-1);s<l;s++)c[s-1]=arguments[s];f.fn.apply(f.context,c)}else{var d,h=f.length;for(s=0;s<h;s++)switch(f[s].once&&this.removeListener(t,f[s].fn,void 0,!0),l){case 1:f[s].fn.call(f[s].context);break;case 2:f[s].fn.call(f[s].context,e);break;case 3:f[s].fn.call(f[s].context,e,n);break;case 4:f[s].fn.call(f[s].context,e,n,o);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];f[s].fn.apply(f[s].context,c)}}return!0},u.prototype.on=function(t,e,r){return i(this,t,e,r,!1)},u.prototype.once=function(t,e,r){return i(this,t,e,r,!0)},u.prototype.removeListener=function(t,e,n,o){var i=r?r+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var u=this._events[i];if(u.fn)u.fn!==e||o&&!u.once||n&&u.context!==n||a(this,i);else{for(var c=0,s=[],f=u.length;c<f;c++)(u[c].fn!==e||o&&!u[c].once||n&&u[c].context!==n)&&s.push(u[c]);s.length?this._events[i]=1===s.length?s[0]:s:a(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,t.exports=u})),Uo=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","interruptbegin","interruptend","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Vo=function(){function t(e){n(this,t),this.emitter=new Wo,this.audioContext=Mo(),this.destination=this.audioContext.createMediaStreamDestination(),this.source=null,this.audio=this.createEl(e)}return i(t,[{key:"createEl",value:function(t){var e=this;return t.element?(this.audio=t.element,this.audio.crossOrigin="anonymous"):(this.audio=document.createElement("audio"),this.audio.crossOrigin="anonymous",this.audio.src=t.url,"boolean"==typeof t.loop&&(this.audio.loop=t.loop),t.volume&&this.setVolume(t.volume)),this.source=this.audioContext.createMediaElementSource(this.audio),this.source.connect(this.destination),Uo.forEach((function(t){e.audio.addEventListener(t,e.handleAudio.bind(e))})),this.audio}},{key:"destroy",value:function(){var t=this;this.source.disconnect(),this.destination.disconnect(),this.audio&&(Uo.forEach((function(e){t.audio.removeEventListener(e,t.handleAudio.bind(t))})),this.audio.pause(),this.audio.removeAttribute("src"),this.audio.load()),this.audioContext.close().then((function(){t.audio=null,t.source=null,t.destination=null,t.audioContext=null}))}},{key:"handleAudio",value:function(t){this.emitter.emit(t.type,t)}},{key:"getStream",value:function(){return this.destination.stream}},{key:"play",value:function(){var t=this;this.audio&&this.audio.play().then((function(){console.log("Audio ".concat(t.audio.src," play success"))})).catch((function(e){t.emitter.emit("error",e)}))}},{key:"pause",value:function(){this.audio&&this.audio.pause()}},{key:"resume",value:function(){this.audio&&(this.audio.pause(),this.audio.currentTime=0)}},{key:"stop",value:function(){this.audio&&(this.audio.pause(),this.audio.currentTime=0)}},{key:"setPosition",value:function(t){if(t<0&&t>this.duration())throw new Error("æ¶é´è¶åºæ­æ²æ¶é¿");this.audio&&(this.audio.currentTime=t)}},{key:"getPosition",value:function(){if(this.audio)return this.audio.currentTime}},{key:"setVolume",value:function(t){if(t>1&&t<0)throw new Error("é³éè¶åºéå¶");this.audio&&(this.audio.volume=t)}},{key:"getVolume",value:function(){if(this.audio)return this.audio.volume}},{key:"setPlayBackRate",value:function(t){if(t>8&&t<0)throw new Error("éçè¶åºéå¶");this.audio&&(this.audio.playbackRate=t)}},{key:"getPlayBackRate",value:function(){if(this.audio)return this.audio.playbackRate}},{key:"duration",value:function(){if(this.audio)return this.audio.duration||0}},{key:"loop",value:function(t){if(void 0===t)return this.audio&&this.audio.loop;this.audio&&"boolean"==typeof t&&(this.audio.loop=t)}},{key:"on",value:function(t,e){this.emitter.on(t,e)}},{key:"off",value:function(t,e){"*"===t?this.emitter.removeAllListeners():this.emitter.off(t,e)}}]),t}(),Yo=new(function(){function t(){n(this,t),this.audioTrackMap=new Map}return i(t,[{key:"createAudioSource",value:function(t){return this.checkAudioSourceParams(t),new Vo(t)}},{key:"createAudioSourceFromElement",value:function(t){if(t instanceof HTMLAudioElement)return new Vo({element:t});throw new Error("element must be HTMLAudioElement")}},{key:"mix",value:function(t){var e={};this.checkMixParams(t);var r=t.targetTrack,n=t.sourceList,o=t.trackList,i=Mo(),a=i.createMediaStreamDestination();if(e.audioContext=i,e.destination=a,r){var u=new MediaStream;u.addTrack(r);var c=i.createMediaStreamSource(u);c.connect(a),e.streamSource=c}if(n){var s=[];n.forEach((function(t){var e=document.createElement("audio");e.srcObject=t.getStream(),e.play().then((function(){console.log("".concat(t.audio.src," mix success"))})).catch((function(){throw new Error("".concat(t.audio.src," mix error"))}));var r=i.createMediaStreamSource(t.destination.stream),n=i.createGain();r.connect(n),n.connect(a),s.push({audio:e,streamSource:r,gainNode:n})})),e.audioList=s}if(o){var f=[];o.forEach((function(t){var e=new MediaStream;e.addTrack(t);var r=i.createMediaStreamSource(e),n=i.createGain();r.connect(n),n.connect(a),f.push({streamSource:r,gainNode:n})})),e.trackList=f}var l=a.stream.getAudioTracks()[0];return this.setAudioTrackMap({targetTrack:r,sourceList:n,trackList:o,id:l.id,resources:e}),l}},{key:"setAudioTrackMap",value:function(t){var e=this,r=t.targetTrack,n=t.sourceList,o=t.id,i=t.trackList,a=t.resources,u=!1,c=null;r?No(r).then((function(t){if(t)u=t,c=r;else{var n=e.audioTrackMap.get(r.id);if(n){var o=n.hasMicrophone,i=n.microphoneTrack;u=o,c=i}else u=!1,c=null}})):(u=!1,c=null),this.audioTrackMap.set(o,{sourceList:n,targetTrack:r,trackList:i,resources:a,hasMicrophone:u,microphoneTrack:c})}},{key:"checkAudioSourceParams",value:function(t){var e=t.url,r=t.loop,n=t.volume;if(!Po(e))throw new Error("url is invalid.");if(r&&"boolean"!=typeof r)throw new Error("loop is invalid.");if(n&&(!function(t){return"number"==typeof t}(n)||n<0||n>1))throw new Error("volume is invalid.");var o=e.lastIndexOf("."),i=e.substr(o+1),a=["mp3","ogg","wav","flac"].indexOf(i)>=0,u=e.startsWith("blob"),c=e.startsWith("data");if(!(a||u||c))throw new Error("url is invalid.")}},{key:"checkMixParams",value:function(t){if(!Io())throw new Error("Your browser is not compatible with AudioMixerPlugin");var e=t.targetTrack,r=t.sourceList,n=t.trackList;if(e&&"audio"!==e.kind)throw new Error("targetTrack is invalid.");if(!r&&!n)throw new Error("params is invalid.");r&&Array.isArray(r)&&r.forEach((function(t){if(!(t instanceof Vo))throw new Error("sourceList is invalid.")})),n&&Array.isArray(n)&&n.forEach((function(t){if(!(t instanceof MediaStreamTrack&&"audio"===t.kind))throw new Error("audioTracks is invalid")}))}},{key:"getAudioTrackMap",value:function(){return this.audioTrackMap}}]),t}());if(Yo.isSupported=function(){return Io()},Yo.destroySource=function(t){var e=Yo.audioTrackMap.get(t.id);if(e&&e.resources){var r=e.resources;t.stop(),r.destination.disconnect(),r.audioContext.close(),r.streamSource.disconnect(),r.audioList&&r.audioList.length>0&&(r.audioList.forEach((function(t){t.gainNode.disconnect(),t.streamSource.disconnect(),t.audio.pause(),t.audio.removeAttribute("src"),t.audio.removeAttribute("srcObject"),t.audio.load(),t.gainNode=null,t.streamSource=null,t.audio=null})),r.audioList=null),r.trackList&&r.trackList.length>0&&(r.trackList.forEach((function(t){t.gainNode.disconnect(),t.streamSource.disconnect(),t.gainNode=null,t.streamSource=null})),r.trackList=null),Yo.audioTrackMap.delete(t.id)}},!t)throw new Error("can not find TRTC");return t.AudioMixerPlugin=Yo,Yo}));
